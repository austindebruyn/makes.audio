<template>
  <div :class="classes" role="alert" :style="styles">
    <div class="container">
      <div class="alert-icon">
        <i class="fa fa-info"></i>
      </div>
      <strong v-if="title">{{ title }}</strong> {{ message }}
      <button v-if="dismissable" type="button" class="close" aria-label="Close" @click="handle_click">
        <span aria-hidden="true">
          <i class="fa fa-times"></i>
        </span>
      </button>
      </div>
    </div>
  </div>
</template>

<script lang="coffee">
  import Vue from 'vue'
  import one_of from 'lib/one_of'

  export default Vue.component 'flash',
    props:
      idx: Number
      level: one_of ['success', 'danger', 'warning', 'info']
      title: String
      message: String
      dismissable: Boolean
      dead: Boolean
    computed:
      classes: ->
        alert: true
        "alert-#{@level}": true
        dead: @dead
      styles: ->
        left: 0
        right: 0
        top: "#{@idx*60}px"
        position: 'absolute'
    methods:
      handle_click: -> @$emit 'click'
</script>

<style lang="scss">
  @import 'src/styles/colors';

  .alert{
      border: 0;
      border-radius: 0;
      color: $white;
      padding-top: .9rem;
      padding-bottom: .9rem;
      font-size: .9rem;
      line-height: 1.6rem;

      &.alert-success{
          background-color: $success;
      }

      &.alert-danger{
          background-color: $danger;
      }

      &.alert-warning{
          background-color: $warning;
      }

      &.alert-info{
          background-color: $info;
      }

      &.alert-primary{
          background-color: $primary;
      }

      .alert-icon{
          display: block;
          float: left;
          margin-right: 15px;
          margin-top: -1px;
      }

      strong{
          text-transform: uppercase;
          font-size: 12px;
      }

      i.fa,
      i.now-ui-icons{
          font-size: 20px;
          padding: 5px 0;
      }

      .close{
          color: $white;
          opacity: .9;
          text-shadow: none;
          line-height: 0;
          outline: 0;
      }
  }
  .alert {
    transition: top 300ms ease-in-out, opacity 200ms;
  }
  .alert.dead {
    opacity: 0;
  }
</style>
